{% set articleCount = 0 %}
{% set cardIndex = 0 %}

{% set cardLayoutInfo = '' %}
{% set articleLayoutInfo = '../_single-article.twig' %}
{% if cardLayout is defined and cardLayout is not empty and cardLayout == 'version2' %}
    {% set cardLayoutInfo = 'card__version2' %}
    {% set articleLayoutInfo = '../_single-article-v2.twig' %}
{% endif %}

<div class="row" data-section="04">
    <div class="col-12">
        <div class="u-generic-topBorder "></div>
        <div class="c-page-head c-page-head-xs">
            <div class="u-heading__large u-heading__large-xs u-pr--6">{{title}}</div>
            {% if linkShow %}
                <a href="{{link}}" class="c-page-head__link">View all</a>
            {% endif %}
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12 {% if adslots[0] is defined %}col-xl-9{% endif %}">
        <div class="row">
            <div class="col-12">
                <div class="c-cards-container c-cards-container-xs bottom-border">
                    {{this.render(articleLayoutInfo, {
                    article: articles[articleCount],
                    position: (articleCount+1),
                    swap : 'false',
                    containerClass: "card-2-mobile card-2-tablet card-7-desktop u-margin-bottom-20 "~cardLayoutInfo,
                    timeSuppress: timeSuppress
                    }) | raw}}
                    {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <div class="c-cards-container c-cards-container-xs bottom-border">
                    <div class="row">
                        {% for i in 1..4 if articles[articleCount] %}

                        <div class="col-12 col-lg-3 left-border">
                            {# imageSize: {width: 120, height: 145},
                            imageSizes: {
                                "mobile": {
                                    width: 120, height: 145
                                },
                                "mobileLrg": {
                                    width: 120, height: 145
                                },
                                "tablet": {
                                    width: 120, height: 145
                                }
                            }, #}
                            {{this.render(articleLayoutInfo, {
                            article: articles[articleCount],
                            position: (articleCount+1),
                            swap : 'false',
                            aspect_ratio:'3:4',
                            imageSize: {width: 120},
                            imageSizes: {
                                "mobile": {
                                    width: 120
                                },
                                "mobileLrg": {
                                    width: 120
                                },
                                "tablet": {
                                    width: 120
                                }
                            },
                            containerClass: "card-1-mobile card-1-tablet card-1-desktop u-margin-bottom-20 "~cardLayoutInfo,
                            timeSuppress: timeSuppress
                            }) | raw}}
                            {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="c-cards-container c-cards-container-xs bottom-border">
                    <div class="row">
                        {% for i in 5..8 if articles[articleCount] %}

                        <div class="col-12 col-lg-3 left-border">
                            {{this.render(articleLayoutInfo, {
                            article: articles[articleCount],
                            position: (articleCount+1),
                            swap : 'false',
                            aspect_ratio:'3:4',
                            imageSize: {width: 120},
                            imageSizes: {
                                "mobile": {
                                    width: 120
                                },
                                "mobileLrg": {
                                    width: 120
                                },
                                "tablet": {
                                    width: 120
                                }
                            },
                            containerClass: "card-1-mobile card-1-tablet card-1-desktop "~cardLayoutInfo,
                            timeSuppress: timeSuppress
                            }) | raw}}
                            {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
            
            </div>
        </div>
    </div>
    {% if adslots[0] is defined %}
    <div class="col-12 col-xl-3">
        <div class="j-adslot" id="{{adslots[0]}}" data-adshape="hpage"></div>
    </div>
    {% endif %}
</div>