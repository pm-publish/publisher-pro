{% set articleCount = 0 %}
{% set cardIndex = 0 %}

{% set cardLayoutInfo = '' %}
{% set articleLayoutInfo = '../_single-article.twig' %}
{% if cardLayout is defined and cardLayout is not empty and cardLayout == 'version2' %}
    {% set cardLayoutInfo = 'card__version2' %}
    {% set articleLayoutInfo = '../_single-article-v2.twig' %}
{% endif %}


{% set countTerm = "" %}

{% if blogData.count != "" %}
    {% set countTerm = "listings" %}
{% endif %}
{% set config       = _Network.getThemeConfig() %}
{% if blogData.count == 1 %}
    {% set countTerm = "listing" %}
{% endif %}
{% set limit = 3 %}
{% if config['classifieds']['new-card-style'] is defined and config['classifieds']['new-card-style'] == true %}
    {% set limit = 2 %}
{% endif %}
{% if featurelisting is defined and featurelisting > 0 %}
    {% set limit = featurelisting %}
{% endif %}

{% set cardClasses = 'acme-card-1-mobile acme-card-1-tablet acme-card-1-desktop '~ cardLayoutInfo %}
{% set acmeClasses = 'acme-col-12 acme-col-md-12 acme-col-lg-4' %}


{% if config['classifieds']['new-card-style'] is defined and config['classifieds']['new-card-style'] == true %}
    {% set cardClasses = 'acme-card-2-mobile acme-card-2-tablet acme-card-2-desktop '~ cardLayoutInfo %}
    {% set acmeClasses = 'acme-col-12 acme-col-md-12 acme-col-lg-6' %}
{% endif %}


<div class="acme-row c-section-head">
    <div class="acme-col-12">
        <a href="{{link}}">
            <div id="section-{{loadmore_id}}" class="c-section-head__title">{{title}}</div>
            {# <div class="c-section-head__count">{{blogData.count}} {{countTerm}}</div> #}
        </a> 
        <div class="c-section-head__rule"></div>
    </div>
</div>
<div class="acme-row">
    {% for i in 0..(limit - 1) if articles[i] %}
        <div class="{{acmeClasses}}">
        
                {# imageSize: {width: 285, height: 192},
                imageSizes: {
                    "mobile": {
                        width: 285, height: 192
                    },
                    "mobileLrg": {
                        width: 285, height: 192
                    },
                    "tablet": {
                        width: 285, height: 192
                    }
                }, #}
            {{this.render(articleLayoutInfo, {
                article: articles[articleCount], 
                position: (articleCount+1),
                cardType: "acme-",
                contentType: contentType,
                containerClass: cardClasses
            }) | raw}}
            {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
        </div>
    {% endfor %}
</div>


{% if articles | length >= 3 %}

        {# imageSize: {width: 285, height: 192}, #}
    {{this.render('/partials/_section-loadmore.twig', {
        sectionNumber: loadmore_id, 
        limit: 6,
        blogId: blogData['guid'],
        contentType: contentType,
        cardClass: cardClasses ~ ' ' ~ acmeClasses,
        cardCount: articleCount,
        cardType: "acme-"
    }) | raw}}

{% endif %}

<div class="u-margin-bottom-60"></div>