{% set articleCount = 0 %}
{% set cardIndex = 0 %}

{% set popularArticles = _Article.getPopularArticles({ 
    limit: 6, 
    sortBy: 'VIEWS', 
    scope: 'network',
    interval: 168,
    includePrimaryBlog: true
}) %}

<div class="row" data-section="06">
    <div class="col-12">
        <div class="u-generic-topBorder "></div>
        <div class="c-page-head c-page-head-xs">
            <div class="u-heading__large u-heading__large-xs u-pr--6">Most Popular</div>
        </div>
    </div>
</div>

<div class="c-cards-container c-cards-container-xs u-margin-bottom-50">
    <div class="row">
        {% for i in 0..5 if popularArticles[i] %}
                <li class="col-12 col-lg-2 left-border">
                    {{this.render('../_single-article.twig', {
                        article: popularArticles[i], 
                        imageSuppress: true,
                        containerClass: "card-6-mobile card-6-tablet card-6-desktop"
                    }) | raw}}
                </li>
        {% endfor %}
    </div>
</div>


<div class="row" data-section="06">
    <div class="col-12">
        <div class="u-generic-topBorder "></div>
        <div class="c-page-head c-page-head-xs">
            <div class="u-heading__large u-heading__large-xs u-pr--6">{{title}}</div>
            <a href="{{link}}" class="c-page-head__link">View all</a>
        </div>
    </div>
</div>
<div class="row">
    <div class="col">
        <div class="c-cards-container c-cards-container-xs bottom-border">
            <div class="row">
                {% for i in 0..3 if articles[articleCount] %}

                <div class="col-12 col-lg-3 left-border">
                    {{this.render('../_single-article.twig', {
                        article: articles[articleCount],
                        position: (articleCount+1),
                        imageSize: {width: 79, height: 96},
                        containerClass: "card-1-mobile card-1-tablet card-1-desktop",
                        timeSuppress: timeSuppress
                    }) | raw}}
                    {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="c-cards-container c-cards-container-xs bottom-border">
            <div class="row">
                {% for i in 4..7 if articles[articleCount] %}

                <div class="col-12 col-lg-3 left-border">
                    {{this.render('../_single-article.twig', {
                        article: articles[articleCount],
                        position: (articleCount+1),
                        imageSize: {width: 79, height: 96},
                        containerClass: "card-1-mobile card-1-tablet card-1-desktop",
                        timeSuppress: timeSuppress
                    }) | raw}}
                    {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                </div>
                {% endfor %}
            </div>
        </div>
    
    </div>
</div>